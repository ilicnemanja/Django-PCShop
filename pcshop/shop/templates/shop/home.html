{% extends 'shop/base.html' %}
{% load static %}

{% block content %}

{% if products %}
<h3 class="heading-primary">Preporučujemo za Vas <ion-icon class="icon-heading icon-heading-checkmark" name="checkmark-circle-outline"></ion-icon></h3>
<div class="container">
    <div class="home-products">
        {% for product in products %}
            {% if product.available %}
                <div class="product">
                    <div class="product-content" onclick="location.href='{% url 'product_detail' product.subcategory.category product.subcategory.name product.id %}';">
                        <h3 class="product-name">{{product.name|truncatechars:33}}</h3>
                        <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'pcshop/media/nophoto.jpg' %}{% endif %}" alt="Product image">
                        <p class="product-price">{{product.price}} RSD</p>
                        <p class="product-description">{{product.description|truncatechars:60}}</p>
                    </div>
                    
                    {% if product.in_stock and product.online_shopping %}
                        <a href="#" class="btn product-btn-card"><ion-icon class="icon-card" name="bag-add-outline"></ion-icon></a>
                    {% else %}
                        {% if not product.in_stock %}
                        <p class="not-in-stock not-in-stock-homepage">Prodato</p>
                        {% else %}
                        <p class="not-in-stock not-in-stock-homepage">Kupovina u radnji</p>
                        {% endif %}
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
        
    </div>
</div>
{% endif %}


{% if products_latest %}
<h3 class="heading-primary">Najnovije u ponudi <ion-icon class="icon-heading icon-heading-flash" name="flash-outline"></ion-icon></h3>
<div class="container">
    <div class="home-products home-latest">
        {% for products in products_latest %}
            {% if products.latest and products.available %}
                <div class="product">
                    <div class="product-content" onclick="location.href='{% url 'product_detail' products.subcategory.category products.subcategory.name products.id %}';">
                        <h3 class="product-name">{{products.name|truncatechars:33}}</h3>
                        <img src="{% if products.image %}{{ products.image.url }}{% else %}{% static 'pcshop/media/nophoto.jpg' %}{% endif %}" alt="Product image">
                        <p class="product-price">{{products.price}} RSD</p>
                        <p class="product-description">{{products.description|truncatechars:60}}</p>
                    </div>
                    {% if products.in_stock and products.online_shopping %}
                        <a href="#" class="btn product-btn-card"><ion-icon class="icon-card" name="bag-add-outline"></ion-icon></a>
                    {% else %}
                        {% if not products.in_stock %}
                        <p class="not-in-stock not-in-stock-homepage">Prodato</p>
                        {% else %}
                        <p class="not-in-stock not-in-stock-homepage">Kupovina u radnji</p>
                        {% endif %}
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endif %}


{% if laptops or pcs %}
<h3 class="heading-primary">Preporuka Desktop i laptop računara <ion-icon class="icon-heading icon-heading-accessibility" name="accessibility-outline"></ion-icon></h3>
<div class="container">
    <div class="home-products home-recommendation">
        {% for laptop in laptops %}
            {% if laptop.recommendation and laptop.available %}
                <div class="product">
                    <div class="product-content" onclick="location.href='{% url 'product_detail' laptop.subcategory.category laptop.subcategory.name laptop.id %}';">
                        <h3 class="product-name">{{laptop.name|truncatechars:33}}</h3>
                        <img src="{% if laptop.image %}{{ laptop.image.url }}{% else %}{% static 'pcshop/media/nophoto.jpg' %}{% endif %}" alt="Product image">
                        <p class="product-price">{{laptop.price}} RSD</p>
                        <p class="product-description">{{laptop.description|truncatechars:60}}</p>
                    </div>
                    {% if laptop.in_stock and laptop.online_shopping %}
                        <a href="#" class="btn product-btn-card"><ion-icon class="icon-card" name="bag-add-outline"></ion-icon></a>
                    {% else %}
                        {% if not laptop.in_stock %}
                        <p class="not-in-stock not-in-stock-homepage">Prodato</p>
                        {% else %}
                        <p class="not-in-stock not-in-stock-homepage">Kupovina u radnji</p>
                        {% endif %}
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}

        {% for pc in pcs %}
            {% if pc.recommendation and pc.available %}
                <div class="product">
                    <div class="product-content" onclick="location.href='{% url 'product_detail' pc.subcategory.category pc.subcategory.name pc.id %}';">
                        <h3 class="product-name">{{pc.name|truncatechars:33}}</h3>
                        <img src="{% if pc.image %}{{ pc.image.url }}{% else %}{% static 'pcshop/media/nophoto.jpg' %}{% endif %}" alt="Product image">
                        <p class="product-price">{{pc.price}} RSD</p>
                        <p class="product-description">{{pc.description|truncatechars:60}}</p>
                    </div>
                    {% if pc.in_stock and pc.online_shopping %}
                        <a href="#" class="btn product-btn-card"><ion-icon class="icon-card" name="bag-add-outline"></ion-icon></a>
                    {% else %}
                        {% if not pc.in_stock %}
                        <p class="not-in-stock not-in-stock-homepage">Prodato</p>
                        {% else %}
                        <p class="not-in-stock not-in-stock-homepage">Kupovina u radnji</p>
                        {% endif %}
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
{% endif %}

{% endblock %}